(()=>{var e={};e.id=454,e.ids=[454],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},66243:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>p,routeModule:()=>m,tree:()=>c});var i=s(50482),r=s(69108),o=s(62563),a=s.n(o),n=s(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["admin",{children:["[title]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,68907)),"/Users/shehabwaleed/Development/work/cairostudio/src/app/admin/[title]/page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,27422)),"/Users/shehabwaleed/Development/work/cairostudio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/Users/shehabwaleed/Development/work/cairostudio/src/app/admin/[title]/page.jsx"],d="/admin/[title]/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/[title]/page",pathname:"/admin/[title]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50799:(e,t,s)=>{Promise.resolve().then(s.bind(s,96272))},96272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var i=s(95344),r=s(3729),o=s(48414),a=s(53971),n=s(51776),l=s(95032),c=s(86378),p=s(90462),d=s(5521),u=s(20783),m=s.n(u),h=s(41223),x=s.n(h),j=s(22254);s(61364);let g=({params:e})=>{let t=(0,j.useRouter)(),[s,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),[v,f]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),D=(0,r.useCallback)(async()=>{g(!0);try{let t=(await getDocs(collection(a.db,"projects"))).docs.map(e=>({...e.data(),id:e.id})).find(t=>t.title===e.title);if(!t)throw Error("Project not found");u(t)}catch(e){f(e.message)}finally{g(!1)}},[e]);if((0,r.useEffect)(()=>{D()},[D]),h)return i.jsx("div",{children:"LOADING"});if(v)return(0,i.jsxs)("p",{children:["Error: ",v]});if(!s)return i.jsx("p",{children:"Project data is not available"});let k=e=>{let{name:t,value:s}=e.target;u(e=>({...e,[t]:s}))},C=async e=>{e.preventDefault();try{let e=(0,o.JU)(a.db,"projects",projectId);await (0,o.r7)(e,s),console.log("Project updated in Firestore"),t("/admin")}catch(e){console.error("Error updating project:",e)}},q=(e,t,s)=>(0,i.jsxs)("label",{children:[e,i.jsx("input",{type:"text",name:t,value:s,onChange:k,placeholder:e})]}),P=(e,t,s,i)=>{u(r=>{let o=r.collectiveItems.map(r=>{if(r.type===e){let e={...r.items[t],[s]:i},o=[...r.items];return o[t]=e,{...r,items:o}}return r});return{...r,collectiveItems:o}})},I=(e,t)=>{u(s=>{let i=s.collectiveItems.map(s=>{if(s.type===e){let e=s.items.filter((e,s)=>s!==t);return{...s,items:e}}return s});return{...s,collectiveItems:i}})},w=(e,t,s)=>(0,i.jsxs)("label",{children:[e,i.jsx("textarea",{name:t,value:s,onChange:k,placeholder:e})]});if(!s)return i.jsx("p",{children:"Loading project..."});let N=(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("label",{children:[e,i.jsx("input",{type:"file",onChange:e=>O(e,t)})]}),i.jsx("div",{className:"filePreview",children:s[t]&&""!==s[t]&&i.jsx(i.Fragment,{children:"homePage"===t||"poster"===t||"cover"===t?i.jsx(x(),{src:s[t],alt:t}):i.jsx("video",{src:s[t],controls:!0})})})]}),O=async(e,t)=>{try{let i=s.title.trim().replace(/\s+/g,"_");if(!i){console.error("Project title is required for file upload");return}if(["collectiveGrid","collectiveDraggable","collective1","collective2","projectImages","designSystem","userExpImage","interactionVideo","filterImage"].includes(t)){let s=e.target.files,r=Array.from(s).map(async e=>{let t=(0,d.iH)(a.t,`uploads/${i}/${e.name}`),s=await (0,d.KV)(t,e),r=await (0,d.Jt)(s.ref),o=e.type.startsWith("image/");return{image:r,isImg:o}}),o=await Promise.all(r);u(e=>{let s=e.collectiveItems.map(e=>e.type===t?{...e,items:e.items?e.items.concat(o):o}:e);return{...e,collectiveItems:s}})}else{let s=e.target.files[0],r=(0,d.iH)(a.t,`uploads/${i}/${s.name}`),o=await (0,d.KV)(r,s),n=await (0,d.Jt)(o.ref);u(e=>({...e,[t]:n}))}}catch(e){console.error("Error handling file upload:",e)}};return h?i.jsx("p",{children:"Loading project..."}):v?(0,i.jsxs)("p",{children:["Error: ",v]}):(0,i.jsxs)("main",{className:"newItem",children:[i.jsx("h1",{children:"Edit Project"}),i.jsx(m(),{href:"/admin",children:i.jsx("button",{children:"Back"})}),(0,i.jsxs)("form",{onSubmit:C,className:"newItem__form",children:[q("Title","title",s.title),q("Link","link",s.link),(()=>{let e=s?.date||"default-date";return(0,i.jsxs)("label",{children:["Year:",i.jsx("input",{type:"number",name:"date",value:e,onChange:k,min:"2020",max:"2099",step:"1",placeholder:"Enter year"})]})})(),(0,i.jsxs)("div",{className:"textAreaForm",children:[w("Description","description",s.description),w("Challenge","challenge",s.challenge),w("Solution","solution",s.solution),w("Introduction","introduction",s.introduction),w("Introduction2","introduction2",s.introduction2),w("Introduction3","introduction3",s.introduction3)]}),(0,i.jsxs)("div",{className:"textForm",children:[q("Service Title","serviceTitle",s.serviceTitle),w("Service Description","serviceDescription",s.serviceDescription)]}),(0,i.jsxs)("div",{className:"textAreaForm",children:[i.jsx("label",{htmlFor:"",children:"Displayed"}),i.jsx("input",{type:"checkbox",name:"displayed",checked:y,onChange:e=>{let t=e.target.checked;b(t),u(e=>({...e,displayed:t}))}})]}),i.jsx(p.Z,{projectData:s,categories:["Research","Branding","UI/UX","Illustration","Animation","3D","Strategy","Digital Design","Graphic Design","Product Design","Motion Design","Web Development"],handleCategoryChange:e=>{let t=s.categories?[...s.categories]:[];t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),u(e=>({...e,categories:t})),console.log("Updated projectData:",s)}}),(0,i.jsxs)("div",{className:"arrayForm",children:[N("HomePage","homePage"),N("MainVideo","mainVideo"),N("Poster","poster"),N("Cover","cover"),s.collectiveItems.map((e,t)=>i.jsx(c.Z,{projectData:s,collectiveType:e.type,handleFileChange:O,handleItemChange:P,removeItem:I},t)),i.jsx(n.Z,{projectData:s,handleSectionChange:(e,t)=>{u(s=>{let i=[...s.projectsDetails.sections];return i[e].name=t,{...s,projectsDetails:{...s.projectsDetails,sections:i}}})},handleSectionOptionChange:(e,t,s)=>{u(i=>{let r={...i};return r.projectsDetails.sections[e].options[t].text=s,r})},addNewSectionOption:e=>{let t=[...s.projectsDetails.sections];if(!t[e]){console.error("Section does not exist at index:",e);return}t[e].options=[...t[e].options,{text:""}],u({...s,projectsDetails:{...s.projectsDetails,sections:t}})},removeSectionOption:(e,t)=>{let i=[...s.projectsDetails.sections];i[e].options.splice(t,1),u({...s,projectsDetails:{...s.projectsDetails,sections:i}})}}),i.jsx(l.Z,{projectData:s,handleSectionTitleChange:(e,t)=>{let i=[...s.projectsDetails.scopeOfWork];i[e].title=t,u({...s,projectsDetails:{...s.projectsDetails,scopeOfWork:i}})},addNewOption:e=>{let t=[...s.projectsDetails.scopeOfWork];t[e].options.push({name:""}),u({...s,projectsDetails:{...s.projectsDetails,scopeOfWork:t}})},handleOptionChange:(e,t,i,r)=>{let o=[...s.projectsDetails.scopeOfWork];o[e].options[t][i]=r,u({...s,projectsDetails:{...s.projectsDetails,scopeOfWork:o}})},removeOption:(e,t)=>{let i=[...s.projectsDetails.scopeOfWork];i[e].options.splice(t,1),u({...s,projectsDetails:{...s.projectsDetails,scopeOfWork:i}})}})]}),i.jsx("button",{type:"submit",children:"Update Project"})]})]})}},90462:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(95344);s(3729);let r=({projectData:e,categories:t,handleCategoryChange:s})=>(0,i.jsxs)("div",{className:"add-group-categories",children:[i.jsx("label",{children:"Categories:"}),t.map(t=>(0,i.jsxs)("label",{children:[t,i.jsx("input",{type:"checkbox",value:t,checked:e.categories.includes(t),onChange:()=>s(t)})]},t))]})},86378:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=s(95344);s(3729);var r=s(41223),o=s.n(r);let a=({projectData:e,collectiveType:t,handleFileChange:s,handleItemChange:r,removeItem:a})=>{let n=e.collectiveItems.find(e=>e.type===t),l=n?n.items.filter(e=>e.image&&""!==e.image):[];return(0,i.jsxs)("div",{className:"collectiveGridForm",children:[(0,i.jsxs)("label",{children:[t.charAt(0).toUpperCase()+t.slice(1),":"]}),i.jsx("input",{type:"file",onChange:e=>s(e,t),multiple:!0}),l.length>0&&l.map((e,s)=>(0,i.jsxs)("div",{className:"collectiveGridItem",children:[e.isImg?i.jsx(o(),{src:e.image,alt:`${t} item ${s}`}):i.jsx("video",{src:e.image,controls:!0}),(0,i.jsxs)("div",{className:"itemControls",children:[(0,i.jsxs)("label",{children:["Is Image?",i.jsx("input",{type:"checkbox",checked:e.isImg,onChange:e=>r(t,s,"isImg",e.target.checked)})]}),i.jsx("button",{type:"button",onClick:()=>a(t,s),children:"Remove"})]})]},s))]})}},95032:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(95344);s(3729);let r=({projectData:e,sectionIndex:t,handleSectionTitleChange:s,addNewOption:r,handleOptionChange:o,removeOption:a})=>i.jsx("section",{children:e.projectsDetails.scopeOfWork.map((e,t)=>(0,i.jsxs)("div",{className:"add-group-section",children:[(0,i.jsxs)("div",{className:"add-group-content",children:[i.jsx("label",{htmlFor:`sectionTitle-${t}`,children:"Scope Title:"}),i.jsx("input",{type:"text",id:`sectionTitle-${t}`,name:"sectionTitle",value:e.title,onChange:e=>s(t,e.target.value),required:!0}),i.jsx("button",{type:"button",onClick:()=>r(t),children:"+"})]}),i.jsx("div",{className:"option-groups",children:e.options.map((e,s)=>(0,i.jsxs)("div",{className:"option-group",children:[i.jsx("label",{htmlFor:`optionName-${t}-${s}`,children:"Title:"}),i.jsx("input",{type:"text",id:`optionName-${t}-${s}`,value:e.name,onChange:e=>o(t,s,"name",e.target.value),required:!0,placeholder:"Option Name"}),i.jsx("button",{type:"button",onClick:()=>a(t,s),children:"-"})]},s))})]},t))})},51776:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(95344);s(3729);let r=({projectData:e,sectionIndex:t,handleSectionChange:s,handleSectionOptionChange:r,addNewSectionOption:o,removeSectionOption:a})=>i.jsx("section",{children:e.projectsDetails.sections.map((e,n)=>(0,i.jsxs)("div",{className:"add-group-section sectionOptions",children:[(0,i.jsxs)("div",{className:"add-group-content",children:[i.jsx("label",{htmlFor:`sectionTitle-${t}`,children:"Section Title:"}),i.jsx("input",{type:"text",value:e.name,onChange:e=>s(n,e.target.value),placeholder:"Section Title"}),i.jsx("button",{type:"button",onClick:()=>o(n),children:"+"})]}),i.jsx("div",{className:"option-groups",children:e.options?.map((e,s)=>i.jsxs("div",{className:"option-group",children:[i.jsx("input",{type:"text",value:e.text,onChange:e=>r(n,s,e.target.value),placeholder:`Option ${s+1}`}),i.jsx("button",{type:"button",onClick:()=>a(t,s),children:"-"})]},s))})]},n))})},68907:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>r,default:()=>a});let i=(0,s(86843).createProxy)(String.raw`/Users/shehabwaleed/Development/work/cairostudio/src/app/admin/[title]/page.jsx`),{__esModule:r,$$typeof:o}=i,a=i.default},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var i=s(70337);let r=e=>[{type:"image/x-icon",sizes:"24x24",url:(0,i.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},61364:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[638,0,337,223,706],()=>s(66243));module.exports=i})();