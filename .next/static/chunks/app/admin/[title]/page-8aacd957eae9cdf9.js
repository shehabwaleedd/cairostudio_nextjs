(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{9441:function(e,t,i){Promise.resolve().then(i.bind(i,6926))},9561:function(e,t,i){"use strict";i.d(t,{I:function(){return l},db:function(){return a},t:function(){return d}});var s=i(994),o=i(3085),n=i(4086),r=i(9584);let c=(0,s.ZF)({apiKey:"AIzaSyA-ov3uccqM2r4fjWPDoqNGQDFiu3SBIkk",authDomain:"cairo-studio-94ed8.firebaseapp.com",projectId:"cairo-studio-94ed8",storageBucket:"cairo-studio-94ed8.appspot.com",messagingSenderId:"330092202147",appId:"1:330092202147:web:d444d60c4613c29e5e5716",measurementId:"G-CW4KFYRLLJ"}),a=(0,n.ad)(c),l=(0,o.v0)(c),d=(0,r.cF)(c)},6926:function(e,t,i){"use strict";i.r(t);var s=i(7437),o=i(2265),n=i(4086),r=i(9561),c=i(4060),a=i(2263),l=i(2083),d=i(9937),p=i(9584),u=i(1396),m=i.n(u),h=i(6691),j=i.n(h),x=i(4033);i(2409),t.default=e=>{let{params:t}=e,i=(0,x.useRouter)(),[u,h]=(0,o.useState)(null),[g,v]=(0,o.useState)(!0),[f,D]=(0,o.useState)(null),[y,b]=(0,o.useState)(!1),I=(0,o.useCallback)(async()=>{v(!0);try{let e=(await getDocs(collection(r.db,"projects"))).docs.map(e=>({...e.data(),id:e.id})).find(e=>e.title===t.title);if(!e)throw Error("Project not found");h(e)}catch(e){D(e.message)}finally{v(!1)}},[t]);if((0,o.useEffect)(()=>{I()},[I]),g)return(0,s.jsx)("div",{children:"LOADING"});if(f)return(0,s.jsxs)("p",{children:["Error: ",f]});if(!u)return(0,s.jsx)("p",{children:"Project data is not available"});let k=e=>{let{name:t,value:i}=e.target;h(e=>({...e,[t]:i}))},C=async e=>{e.preventDefault();try{let e=(0,n.JU)(r.db,"projects",projectId);await (0,n.r7)(e,u),console.log("Project updated in Firestore"),i("/admin")}catch(e){console.error("Error updating project:",e)}},N=(e,t,i)=>(0,s.jsxs)("label",{children:[e,(0,s.jsx)("input",{type:"text",name:t,value:i,onChange:k,placeholder:e})]}),O=(e,t,i,s)=>{h(o=>{let n=o.collectiveItems.map(o=>{if(o.type===e){let e={...o.items[t],[i]:s},n=[...o.items];return n[t]=e,{...o,items:n}}return o});return{...o,collectiveItems:n}})},S=(e,t)=>{h(i=>{let s=i.collectiveItems.map(i=>{if(i.type===e){let e=i.items.filter((e,i)=>i!==t);return{...i,items:e}}return i});return{...i,collectiveItems:s}})},F=(e,t,i)=>(0,s.jsxs)("label",{children:[e,(0,s.jsx)("textarea",{name:t,value:i,onChange:k,placeholder:e})]});if(!u)return(0,s.jsx)("p",{children:"Loading project..."});let w=(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{children:[e,(0,s.jsx)("input",{type:"file",onChange:e=>P(e,t)})]}),(0,s.jsx)("div",{className:"filePreview",children:u[t]&&""!==u[t]&&(0,s.jsx)(s.Fragment,{children:"homePage"===t||"poster"===t||"cover"===t?(0,s.jsx)(j(),{src:u[t],alt:t}):(0,s.jsx)("video",{src:u[t],controls:!0})})})]}),P=async(e,t)=>{try{let i=u.title.trim().replace(/\s+/g,"_");if(!i){console.error("Project title is required for file upload");return}if(["collectiveGrid","collectiveDraggable","collective1","collective2","projectImages","designSystem","userExpImage","interactionVideo","filterImage"].includes(t)){let s=e.target.files,o=Array.from(s).map(async e=>{let t=(0,p.iH)(r.t,"uploads/".concat(i,"/").concat(e.name)),s=await (0,p.KV)(t,e),o=await (0,p.Jt)(s.ref),n=e.type.startsWith("image/");return{image:o,isImg:n}}),n=await Promise.all(o);h(e=>{let i=e.collectiveItems.map(e=>e.type===t?{...e,items:e.items?e.items.concat(n):n}:e);return{...e,collectiveItems:i}})}else{let s=e.target.files[0],o=(0,p.iH)(r.t,"uploads/".concat(i,"/").concat(s.name)),n=await (0,p.KV)(o,s),c=await (0,p.Jt)(n.ref);h(e=>({...e,[t]:c}))}}catch(e){console.error("Error handling file upload:",e)}};return g?(0,s.jsx)("p",{children:"Loading project..."}):f?(0,s.jsxs)("p",{children:["Error: ",f]}):(0,s.jsxs)("main",{className:"newItem",children:[(0,s.jsx)("h1",{children:"Edit Project"}),(0,s.jsx)(m(),{href:"/admin",children:(0,s.jsx)("button",{children:"Back"})}),(0,s.jsxs)("form",{onSubmit:C,className:"newItem__form",children:[N("Title","title",u.title),N("Link","link",u.link),(()=>{let e=(null==u?void 0:u.date)||"default-date";return(0,s.jsxs)("label",{children:["Year:",(0,s.jsx)("input",{type:"number",name:"date",value:e,onChange:k,min:"2020",max:"2099",step:"1",placeholder:"Enter year"})]})})(),(0,s.jsxs)("div",{className:"textAreaForm",children:[F("Description","description",u.description),F("Challenge","challenge",u.challenge),F("Solution","solution",u.solution),F("Introduction","introduction",u.introduction),F("Introduction2","introduction2",u.introduction2),F("Introduction3","introduction3",u.introduction3)]}),(0,s.jsxs)("div",{className:"textForm",children:[N("Service Title","serviceTitle",u.serviceTitle),F("Service Description","serviceDescription",u.serviceDescription)]}),(0,s.jsxs)("div",{className:"textAreaForm",children:[(0,s.jsx)("label",{htmlFor:"",children:"Displayed"}),(0,s.jsx)("input",{type:"checkbox",name:"displayed",checked:y,onChange:e=>{let t=e.target.checked;b(t),h(e=>({...e,displayed:t}))}})]}),(0,s.jsx)(d.Z,{projectData:u,categories:["Research","Branding","UI/UX","Illustration","Animation","3D","Strategy","Digital Design","Graphic Design","Product Design","Motion Design","Web Development"],handleCategoryChange:e=>{let t=u.categories?[...u.categories]:[];t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),h(e=>({...e,categories:t})),console.log("Updated projectData:",u)}}),(0,s.jsxs)("div",{className:"arrayForm",children:[w("HomePage","homePage"),w("MainVideo","mainVideo"),w("Poster","poster"),w("Cover","cover"),u.collectiveItems.map((e,t)=>(0,s.jsx)(l.Z,{projectData:u,collectiveType:e.type,handleFileChange:P,handleItemChange:O,removeItem:S},t)),(0,s.jsx)(c.Z,{projectData:u,handleSectionChange:(e,t)=>{h(i=>{let s=[...i.projectsDetails.sections];return s[e].name=t,{...i,projectsDetails:{...i.projectsDetails,sections:s}}})},handleSectionOptionChange:(e,t,i)=>{h(s=>{let o={...s};return o.projectsDetails.sections[e].options[t].text=i,o})},addNewSectionOption:e=>{let t=[...u.projectsDetails.sections];if(!t[e]){console.error("Section does not exist at index:",e);return}t[e].options=[...t[e].options,{text:""}],h({...u,projectsDetails:{...u.projectsDetails,sections:t}})},removeSectionOption:(e,t)=>{let i=[...u.projectsDetails.sections];i[e].options.splice(t,1),h({...u,projectsDetails:{...u.projectsDetails,sections:i}})}}),(0,s.jsx)(a.Z,{projectData:u,handleSectionTitleChange:(e,t)=>{let i=[...u.projectsDetails.scopeOfWork];i[e].title=t,h({...u,projectsDetails:{...u.projectsDetails,scopeOfWork:i}})},addNewOption:e=>{let t=[...u.projectsDetails.scopeOfWork];t[e].options.push({name:""}),h({...u,projectsDetails:{...u.projectsDetails,scopeOfWork:t}})},handleOptionChange:(e,t,i,s)=>{let o=[...u.projectsDetails.scopeOfWork];o[e].options[t][i]=s,h({...u,projectsDetails:{...u.projectsDetails,scopeOfWork:o}})},removeOption:(e,t)=>{let i=[...u.projectsDetails.scopeOfWork];i[e].options.splice(t,1),h({...u,projectsDetails:{...u.projectsDetails,scopeOfWork:i}})}})]}),(0,s.jsx)("button",{type:"submit",children:"Update Project"})]})]})}},9937:function(e,t,i){"use strict";var s=i(7437);i(2265),t.Z=e=>{let{projectData:t,categories:i,handleCategoryChange:o}=e;return(0,s.jsxs)("div",{className:"add-group-categories",children:[(0,s.jsx)("label",{children:"Categories:"}),i.map(e=>(0,s.jsxs)("label",{children:[e,(0,s.jsx)("input",{type:"checkbox",value:e,checked:t.categories.includes(e),onChange:()=>o(e)})]},e))]})}},2083:function(e,t,i){"use strict";var s=i(7437);i(2265);var o=i(6691),n=i.n(o);t.Z=e=>{let{projectData:t,collectiveType:i,handleFileChange:o,handleItemChange:r,removeItem:c}=e,a=t.collectiveItems.find(e=>e.type===i),l=a?a.items.filter(e=>e.image&&""!==e.image):[];return(0,s.jsxs)("div",{className:"collectiveGridForm",children:[(0,s.jsxs)("label",{children:[i.charAt(0).toUpperCase()+i.slice(1),":"]}),(0,s.jsx)("input",{type:"file",onChange:e=>o(e,i),multiple:!0}),l.length>0&&l.map((e,t)=>(0,s.jsxs)("div",{className:"collectiveGridItem",children:[e.isImg?(0,s.jsx)(n(),{src:e.image,alt:"".concat(i," item ").concat(t)}):(0,s.jsx)("video",{src:e.image,controls:!0}),(0,s.jsxs)("div",{className:"itemControls",children:[(0,s.jsxs)("label",{children:["Is Image?",(0,s.jsx)("input",{type:"checkbox",checked:e.isImg,onChange:e=>r(i,t,"isImg",e.target.checked)})]}),(0,s.jsx)("button",{type:"button",onClick:()=>c(i,t),children:"Remove"})]})]},t))]})}},2263:function(e,t,i){"use strict";var s=i(7437);i(2265),t.Z=e=>{let{projectData:t,sectionIndex:i,handleSectionTitleChange:o,addNewOption:n,handleOptionChange:r,removeOption:c}=e;return(0,s.jsx)("section",{children:t.projectsDetails.scopeOfWork.map((e,t)=>(0,s.jsxs)("div",{className:"add-group-section",children:[(0,s.jsxs)("div",{className:"add-group-content",children:[(0,s.jsx)("label",{htmlFor:"sectionTitle-".concat(t),children:"Scope Title:"}),(0,s.jsx)("input",{type:"text",id:"sectionTitle-".concat(t),name:"sectionTitle",value:e.title,onChange:e=>o(t,e.target.value),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>n(t),children:"+"})]}),(0,s.jsx)("div",{className:"option-groups",children:e.options.map((e,i)=>(0,s.jsxs)("div",{className:"option-group",children:[(0,s.jsx)("label",{htmlFor:"optionName-".concat(t,"-").concat(i),children:"Title:"}),(0,s.jsx)("input",{type:"text",id:"optionName-".concat(t,"-").concat(i),value:e.name,onChange:e=>r(t,i,"name",e.target.value),required:!0,placeholder:"Option Name"}),(0,s.jsx)("button",{type:"button",onClick:()=>c(t,i),children:"-"})]},i))})]},t))})}},4060:function(e,t,i){"use strict";var s=i(7437);i(2265),t.Z=e=>{let{projectData:t,sectionIndex:i,handleSectionChange:o,handleSectionOptionChange:n,addNewSectionOption:r,removeSectionOption:c}=e;return(0,s.jsx)("section",{children:t.projectsDetails.sections.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"add-group-section sectionOptions",children:[(0,s.jsxs)("div",{className:"add-group-content",children:[(0,s.jsx)("label",{htmlFor:"sectionTitle-".concat(i),children:"Section Title:"}),(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>o(t,e.target.value),placeholder:"Section Title"}),(0,s.jsx)("button",{type:"button",onClick:()=>r(t),children:"+"})]}),(0,s.jsx)("div",{className:"option-groups",children:null===(a=e.options)||void 0===a?void 0:a.map((e,o)=>(0,s.jsxs)("div",{className:"option-group",children:[(0,s.jsx)("input",{type:"text",value:e.text,onChange:e=>n(t,o,e.target.value),placeholder:"Option ".concat(o+1)}),(0,s.jsx)("button",{type:"button",onClick:()=>c(i,o),children:"-"})]},o))})]},t)})})}},2409:function(){},4033:function(e,t,i){e.exports=i(5313)}},function(e){e.O(0,[358,565,271,691,396,971,938,744],function(){return e(e.s=9441)}),_N_E=e.O()}]);