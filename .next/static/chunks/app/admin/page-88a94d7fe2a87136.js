(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8020:function(e,t,s){Promise.resolve().then(s.bind(s,8596))},9561:function(e,t,s){"use strict";s.d(t,{I:function(){return d},db:function(){return o},t:function(){return u}});var r=s(994),n=s(3085),a=s(4086),i=s(9584);let c=(0,r.ZF)({apiKey:"AIzaSyA-ov3uccqM2r4fjWPDoqNGQDFiu3SBIkk",authDomain:"cairo-studio-94ed8.firebaseapp.com",projectId:"cairo-studio-94ed8",storageBucket:"cairo-studio-94ed8.appspot.com",messagingSenderId:"330092202147",appId:"1:330092202147:web:d444d60c4613c29e5e5716",measurementId:"G-CW4KFYRLLJ"}),o=(0,a.ad)(c),d=(0,n.v0)(c),u=(0,i.cF)(c)},8596:function(e,t,s){"use strict";s.r(t);var r=s(7437),n=s(2265),a=s(4086),i=s(9561),c=s(4033),o=s(1648),d=s(7060),u=s(6691),l=s.n(u);s(7772);var h=s(4651);t.default=()=>{let e=(0,c.useRouter)(),t=(0,h.useUserAuth)(),{projects:s,error:u,loading:p}=(0,o.Z)(),f=t=>{e.push("/admin/".concat(t))},j=async e=>{if(window.confirm("Are you sure you want to delete this project?"))try{await (0,a.oe)((0,a.JU)(i.db,"projects",e)),(0,d.Z)()}catch(e){console.error("Error deleting project: ",e)}};return((0,n.useEffect)(()=>{t||e.push("/login")},[t,e]),p)?(0,r.jsx)("div",{children:"LOADING"}):u?(0,r.jsxs)("p",{children:["Error: ",u]}):(0,r.jsx)("main",{className:"dashboard",children:(0,r.jsxs)("div",{className:"dashboard__container",children:[(0,r.jsxs)("div",{className:"dashboard__header",children:[(0,r.jsx)("h1",{children:"Dashboard"}),(0,r.jsx)("button",{onClick:()=>{e.push("/admin/newItem")},children:"Add New Project"})]}),(0,r.jsx)("div",{className:"dashboard__content",children:s.map(e=>(0,r.jsxs)("div",{className:"dashboard__project",children:[(0,r.jsx)("div",{className:"dashboard__project__img",children:(0,r.jsx)(l(),{src:e.homePage,alt:e.title,width:600,height:200})}),(0,r.jsxs)("div",{className:"dashboard__project__info",children:[(0,r.jsx)("h2",{children:e.title}),(0,r.jsx)("p",{children:e.description})]}),(0,r.jsxs)("div",{className:"dashboard__project__actions",children:[(0,r.jsx)("button",{onClick:()=>f(e.title),children:"edit"}),(0,r.jsx)("button",{onClick:()=>j(e.id),children:"-"})]})]},e.id))})]})})}},4651:function(e,t,s){"use strict";s.r(t),s.d(t,{UserContextProvider:function(){return o},useUserAuth:function(){return d}});var r=s(7437),n=s(2265),a=s(3085),i=s(9561);let c=(0,n.createContext)(),o=e=>{let{children:t}=e,[s,o]=(0,n.useState)({});return(0,n.useEffect)(()=>{let e=(0,a.Aj)(i.I,e=>{o(e)});return()=>{e()}},[]),(0,r.jsx)(c.Provider,{value:{createUser:(e,t,s,r)=>(0,a.Xb)(i.I,e,t,s,r),user:s,logOut:()=>(0,a.w7)(i.I),signIn:(e,t)=>(0,a.e5)(i.I,e,t),passwordReset:e=>(0,a.LS)(i.I,e)},children:t})},d=()=>(0,n.useContext)(c)},7060:function(e,t,s){"use strict";var r=s(4086),n=s(9561);let a=async e=>{let{setLoading:t,setError:s,setProjects:a}=e;t(!0);try{let e=(await (0,r.PL)((0,r.hJ)(n.db,"projects"))).docs.map(e=>({...e.data(),id:e.id}));sessionStorage.setItem("projects",JSON.stringify(e)),a(e)}catch(e){s(e.message)}finally{t(!1)}};t.Z=a},1648:function(e,t,s){"use strict";var r=s(2265),n=s(7060);let a="projects";t.Z=()=>{let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),d=()=>{let e=sessionStorage.getItem(a);if(!e)return!1;let t=JSON.parse(e).timestamp;return new Date().getTime()-t<36e5},u=(0,r.useCallback)(async()=>{await (0,n.Z)({setLoading:i,setError:o,setProjects:t})},[]);return(0,r.useEffect)(()=>{if(d()){let e=JSON.parse(sessionStorage.getItem(a)||"[]");Array.isArray(e)?t(e):u()}else u()},[u]),{projects:e,error:c,loading:s,refetch:u}}},7772:function(){},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[358,565,271,691,971,938,744],function(){return e(e.s=8020)}),_N_E=e.O()}]);